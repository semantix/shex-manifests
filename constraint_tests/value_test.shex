PREFIX fhir: <http://hl7.org/fhir/> 
PREFIX fhirvs: <http://hl7.org/fhir/ValueSet/>
PREFIX xsd: <http://www.w3.org/2001/XMLSchema#> 

IMPORT <types.shex>
IMPORT <datatypes.shex>

# A duration of time during which an organism (or a process) has existed
<Age> AND (
    ({ fhir:code . } OR  NOT { fhir:value {fhir:v .} } ) AND ( NOT { fhir:system {fhir:v .} }  OR ({ fhir:system { fhir:v ['https://ucum.org'^^xsd:anyURI] }  })) AND ( NOT { fhir:value {fhir:v .} }  OR  NOT { fhir:value  . } OR ({ fhir:value { fhir:v MinExclusive 0 }  }))
)

# constraints from Eric's example
#  AND ( { fhir:code . } OR NOT { fhir:value . } )
# AND ( NOT { fhir:system . } OR { fhir:system { fhir:v ["http://ucum.org/ucum"^^<http://www.w3.org/2001/XMLSchema#anyURI>] } } )
# AND ( NOT { fhir:value . } OR { fhir:value NOT { fhir:v . } } OR { fhir:value { fhir:v /^\.?0*\.?[1-9]/ } } )
